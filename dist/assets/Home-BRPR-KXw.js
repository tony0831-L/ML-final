import{a as p,b as v,_ as k}from"./_plugin-vue_export-helper-VMUUtOLp.js";import{d as C,r as h,o as B,c as l,w as D,a as H,b as m,u as S,E as c,e as $,f as x,g as i,h as a,t as r,F as E,i as j}from"./index-DK6MHM68.js";const F={id:"container"},I={class:"card-header"},M={id:"wrapper"},O=["onClick"],G={class:"left"},L={class:"right"},N=C({__name:"Home",setup(R){const d=h(!0),t=h(),f=S(),g=e=>{f.push(`/log/${e._id}`)},y=async()=>{const e=await p(v.findByIp);if(e.body.length)t.value=e.body;else{c.error("🧐 當前ip沒有紀錄, 正在新增");const s=await u();if(s){c({message:"🤗 新增完畢",type:"success"});const n=[];n.push(s),t.value=n}}d.value=!1},w=async()=>{var s;const e=await u();e&&(c({message:"🤗 新增完畢",type:"success"}),(s=t.value)==null||s.push(e))},u=async()=>{var s;const e=await p(`${v.insertOne}?id=${(s=t.value)==null?void 0:s.length}`);if(e.code==200)return e.body;c.error("😅 新增失敗")};return B(()=>{y()}),(e,s)=>{const n=$("el-card"),b=x("loading");return i(),l("div",F,[D((i(),H(n,{shadow:"always"},{header:m(()=>[a("div",I,[a("p",null,"👌 ip: "+r(t.value?t.value[0].ip:""),1),a("p",{class:"newSession btn",onClick:w}," 新增對話 + ")])]),default:m(()=>[a("div",M,[s[0]||(s[0]=a("h3",null,"紀錄:",-1)),(i(!0),l(E,null,j(t.value,(o,_)=>(i(),l("div",{class:"log btn",key:_,onClick:T=>g(o)},[a("div",G,r(_+1)+". "+r(o.subject?"🤔討論"+o.subject:"😅尚未選擇主題"),1),a("div",L," 🕑"+r(o.createTime),1)],8,O))),128))])]),_:1})),[[b,d.value]])])}}}),z=k(N,[["__scopeId","data-v-41e0c520"]]);export{z as default};
